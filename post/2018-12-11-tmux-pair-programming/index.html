<!DOCTYPE html>
<html lang="en-US">

    <head>
<meta charset="utf-8" />
<meta name="author" content="dvogt" />
<meta name="description" content="personal developer blog for some coding notes." />
<meta name="keywords" content="blog, tech, develop, software, coding" />
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<meta name="generator" content="Hugo 0.56.3" />

<link rel="canonical" href="/post/2018-12-11-tmux-pair-programming/">
<base href="/" />
<meta property="og:title" content="Pair programming with tmux" />
<meta property="og:description" content="Create a secure login to your tmux session" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/2018-12-11-tmux-pair-programming/" />
<meta property="article:published_time" content="2018-12-11T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-12-11T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Pair programming with tmux"/>
<meta name="twitter:description" content="Create a secure login to your tmux session"/>


<meta itemprop="name" content="Pair programming with tmux">
<meta itemprop="description" content="Create a secure login to your tmux session">


<meta itemprop="datePublished" content="2018-12-11T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2018-12-11T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="379">



<meta itemprop="keywords" content="linux,tmux,pair-programming,ssh,development,programming," />


<link rel="stylesheet" href="css/layout.css" />
<link rel="stylesheet" href="css/syntax.css" />
<style type="text/css">
body {
  background-color: #202020;
  color: #dbdbdb;
}

a { color: #dbdbdb; }

pre {
  background: #1D1F21;
  border: 1px solid #dbdbdb;
  border-radius: 5px;
}

code {
  background: #1D1F21;
}

blockquote {
  background: #1D1F21;
  border-left: 3px solid #dbdbdb;
}

table {
  margin: 1em auto;
  border-collapse: collapse;
}

table, th, td {
  border: 1px solid #dbdbdb;
}

th {
  background: #dbdbdb;
  color: #202020;
}

.siteTitle a { color: #B3B6B7; }

.post .content h1{ color: #B3B6B7; }
.post .content h2{ color: #B3B6B7; }
.post .content h3{ color: #B3B6B7; }
.post .content h4{ color: #B3B6B7; }
.post .content h5{ color: #B3B6B7; }
.post .content h6{ color: #B3B6B7; }
.post .content a:hover { color: #B3B6B7; }
.social-link:hover { color: #B3B6B7; }
.nav-item-title:hover { color: #B3B6B7; }
.tag a:hover { color: #B3B6B7; }
.copyright { color: #404040 }
.poweredby { color: #404040 }
.poweredby a { color: #404040; }
.post-preview .title a{ color: #B3B6B7; }
.content-item a:hover{
  text-decoration: underline;
  color: #B3B6B7;
}
.post-list .title { color: #B3B6B7; }
.rmore { color: #B3B6B7; }
.terms .term a:hover {
  text-decoration: underline;
  color: #B3B6B7;
}

</style>



<title>


     Pair programming with tmux 

</title>

</head>


    <body>
        <div class="main">
            <header>

                <div class="header-bar">

                    <nav>
                        <div class="siteTitle">
                            <a href="/">blogðŸ““</a>
                        </div> 

                        
                        
                        <a class="nav-item" href="https://vogt.dev"><div class="nav-item-title">web</div></a>
                        
                        <a class="nav-item" href="/tags/"><div class="nav-item-title">tags</div></a>
                        
                        <a class="nav-item" href="/index.xml"><div class="nav-item-title">rss</div></a>
                        

                    </nav>
                </div>

                
<div class="social-links-header">

  

  

  

  

  

</div>


            </header>


<article class="post">
    <h1 class="title"> Pair programming with tmux </h1>
    <p class="description"> Create a secure login to your tmux session </p>
    <div class="content"> 

<p>The simpliest way to develop over the network with a colleague or friend in a
secure way, is to use ssh[1] and tmux[2]. An alternative is to use a very
popular tool named tmate[3]. In my opinion, it is not necessary, because it is
so simple to create a new user on your machine and to share your tmux session
with them. Only if you haven&rsquo;t a ssh incoming routing, you may use another way.
Here is a step-by-step guide to create a user and share your tmux session:</p>

<h3 id="requirements">Requirements</h3>

<p>Install the following packages on your machine:</p>

<pre><code>tmux        # terminal multiplexer
openssh     # ssh daemon
</code></pre>

<p>and the ssh port forwarded to your machine.</p>

<h3 id="create-user-and-group">Create user and group</h3>

<pre><code>$ groupadd shared               # create group &quot;shared&quot;
$ useradd tmux                  # create user &quot;tmux&quot;
$ usermod -a -G shared tmux     # add user tmux to group shared
$ usermod -a -G shared $USER    # add your current user to group
$ passwd tmux                   # set pass for user tmux
$ mkdir /home/tmux              # create home dir for tmux
</code></pre>

<h3 id="share-a-tmux-session">Share a tmux session</h3>

<p>I have created a little script for sharing a new tmux session</p>

<p><strong><em>tmuxshare</em></strong></p>

<pre><code class="language-bash">#!/usr/bin/env bash

if ! pgrep -x &quot;sshd&quot; &gt; /dev/null
then
    echo &quot;Start ssh daemon...&quot; &amp;&amp; sudo systemctl start sshd.service
fi
tmux -S /tmp/shared -f ~/.tmux.conf new -s shared -d
chgrp shared /tmp/shared
tmux -S /tmp/shared attach
</code></pre>

<p>for joining a tmux session, the thmux user have to run the <code>tmuxjoin</code> script</p>

<p><strong><em>tmuxjoin</em></strong></p>

<pre><code class="language-bash">#!/usr/bin/env bash
[[ -e /tmp/shared ]] &amp;&amp; tmux -S /tmp/shared attach
</code></pre>

<p>To run this script automatically after user login, put this line to the
<code>.bash_profile</code></p>

<pre><code class="language-bash">[[ -e /tmp/shared ]] &amp;&amp; ~/tmuxjoin
</code></pre>

<p><strong><em>EDIT:</em></strong>
For sharing your current session, I modified the scripts as follows:</p>

<p><strong><em>tmuxshare</em></strong></p>

<pre><code class="language-bash">#!/usr/bin/env bash

CURRENT=$(echo $TMUX | cut -f1 -d',')
SESSION=$(echo $TMUX | cut -f3 -d',')

if ! pgrep -x &quot;sshd&quot; &gt; /dev/null
then
    echo &quot;Start ssh daemon...&quot; &amp;&amp; sudo systemctl start sshd.service
fi
chgrp shared &quot;$CURRENT&quot;
chgrp shared &quot;$(dirname $CURRENT)&quot;
chmod 0770 -R &quot;$(dirname $CURRENT)&quot;
echo &quot;$CURRENT,$SESSION&quot; &gt; /tmp/shared.current
</code></pre>

<p><strong><em>tmuxjoin</em></strong></p>

<pre><code class="language-bash">#!/usr/bin/env bash
if [ -e /tmp/shared.current ]; then
    SOCKET=&quot;$(cat /tmp/shared.current | cut -f1 -d',')&quot;
    SESSION=&quot;$(cat /tmp/shared.current | cut -f2 -d',')&quot;
    tmux -S &quot;$SOCKET&quot; attach -t &quot;$SESSION&quot;
fi
[[ -e /tmp/shared ]] &amp;&amp; tmux -S /tmp/shared attach
</code></pre>

<h4 id="sources">Sources</h4>

<p>[1] <a href="https://www.openssh.com" target="_blank">OpenSSH</a><br />
[2] <a href="https://github.com/tmux/tmux" target="_blank">TMUX</a><br />
[3] <a href="https://tmate.io" target="_blank">tmate.io</a></p>
 </div>
    <footer class="post-footer">

Please comment @github: <a href="https://github.com/dvogt23/blog/issues/new?labels=comment&amp;title=Page: Pair%20programming%20with%20tmux " target="_BLANK">comment</a>

</footer>


  


</article>

  <footer>

  <div class="copyright"> Â© dima 2018 </div>

  <div class="poweredby">
      <a href="https://gohugo.io/" target="_BLANK">hugo</a>/<a href="https://github.com/gyorb/hugo-dusk" target="_BLANK">hugo-dusk</a>
  </div>

  </footer>

</div> 

</body>
</html>

